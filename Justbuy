    <!DOCTYPE html>
    <html lang="en">
    <a id="top"></a>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>JUSTBUY - Your Marketplace</title>
        <style>
            /* Reset and base styles */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            }
            
            body {
                background: #fafbfc;
                color: #1a1a1a;
                line-height: 1.6;
                font-size: 16px;
            }
            
            /* Layout */
            .container {
                width: 100%;
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 24px;
            }
            
            header {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                border-bottom: 1px solid #e5e7eb;
                padding: 16px 0;
                position: sticky;
                top: 0;
                z-index: 1000;
            }
            
            nav {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 20px;
            }

            .search-container {
                display: flex;
                align-items: center;
                background: #f3f4f6;
                border-radius: 25px;
                padding: 8px 16px;
                border: 1px solid #e5e7eb;
                transition: all 0.3s ease;
            }

            .search-container:focus-within {
                background: white;
                border-color: #3b82f6;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }

            .search-input {
                border: none;
                background: transparent;
                padding: 8px 12px;
                font-size: 14px;
                color: #374151;
                outline: none;
                min-width: 200px;
            }

            .search-input::placeholder {
                color: #9ca3af;
            }

            .search-btn {
                background: none;
                border: none;
                font-size: 16px;
                cursor: pointer;
                padding: 8px;
                border-radius: 50%;
                transition: background-color 0.3s ease;
            }

            .search-btn:hover {
                background: rgba(59, 130, 246, 0.1);
            }

            .user-actions {
                display: flex;
                gap: 12px;
                align-items: center;
            }

            .btn-outline {
                background: transparent;
                border: 2px solid #3b82f6;
                color: #3b82f6;
            }

            .btn-outline:hover {
                background: #3b82f6;
                color: white;
            }
            
            .nav-links {
                list-style: none;
                display: flex;
                gap: 40px;
                align-items: center;
            }
            
            .nav-links a {
                text-decoration: none;
                color: #374151;
                font-weight: 500;
                font-size: 15px;
                transition: all 0.3s ease;
                padding: 8px 16px;
                border-radius: 8px;
            }
            
            .nav-links a:hover {
                color: #3b82f6;
                background: #f3f4f6;
            }
            
            main {
                min-height: 80vh;
                padding: 0;
            }
            
            footer {
                background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
                color: white;
                padding: 60px 0 30px;
                margin-top: 80px;
            }
            
            .footer-content {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 40px;
                margin-bottom: 40px;
            }
            
            .footer-section h3 {
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 16px;
                color: #3b82f6;
            }
            
            .footer-section h4 {
                font-size: 1.125rem;
                font-weight: 600;
                margin-bottom: 16px;
                color: #f3f4f6;
            }
            
            .footer-section p {
                color: #d1d5db;
                line-height: 1.6;
                margin-bottom: 8px;
            }
            
            .footer-section ul {
                list-style: none;
            }
            
            .footer-section ul li {
                margin-bottom: 8px;
            }
            
            .footer-section ul li a {
                color: #d1d5db;
                text-decoration: none;
                transition: color 0.3s ease;
            }
            
            .footer-section ul li a:hover {
                color: #3b82f6;
            }
            
            .footer-bottom {
                border-top: 1px solid #374151;
                padding-top: 30px;
                text-align: center;
            }
            
            .footer-bottom p {
                color: #9ca3af;
                font-size: 0.875rem;
            }
            
            footer {
                background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
                color: white;
                padding: 60px 0 30px;
                margin-top: 80px;
            }

            .footer-content {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 40px;
                margin-bottom: 40px;
            }

            .footer-section h3 {
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 16px;
                color: #3b82f6;
            }

            .footer-section h4 {
                font-size: 1.125rem;
                font-weight: 600;
                margin-bottom: 16px;
                color: #f3f4f6;
            }

            .footer-section p {
                color: #d1d5db;
                line-height: 1.6;
                margin-bottom: 8px;
            }

            .footer-section ul {
                list-style: none;
            }

            .footer-section ul li {
                margin-bottom: 8px;
            }

            .footer-section ul li a {
                color: #d1d5db;
                text-decoration: none;
                transition: color 0.3s ease;
            }

            .footer-section ul li a:hover {
                color: #3b82f6;
            }

            .footer-bottom {
                border-top: 1px solid #374151;
                padding-top: 30px;
                text-align: center;
            }

            .footer-bottom p {
                color: #9ca3af;
                font-size: 0.875rem;
            }
            
            /* Products section styles */
            .products {
                background: white;
                padding: 80px 50px;
                border-radius: 24px;
                margin: 80px 0;
                box-shadow: 0 20px 40px rgba(0,0,0,0.08);
                border: 1px solid #e5e7eb;
            }

            .products h2 {
                color: #1f2937;
                font-size: 3rem;
                font-weight: 800;
                margin-bottom: 60px;
                text-align: center;
                letter-spacing: -0.02em;
            }

            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 32px;
                margin-top: 60px;
            }

            .product-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 10px 25px rgba(0,0,0,0.08);
                transition: all 0.4s ease;
                border: 1px solid #e2e8f0;
                position: relative;
            }

            .product-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            }

            .product-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px rgba(0,0,0,0.15);
                border-color: #cbd5e1;
            }

            .product-image {
                background: white;
                padding: 20px;
                text-align: center;
            }

            .product-image img {
                width: 100%;
                max-width: 250px;
                height: 200px;
                object-fit: cover;
                border-radius: 12px;
                display: block;
                margin: 0 auto;
            }

            .product-details {
                padding: 24px;
            }

            .product-title {
                margin: 0 0 12px;
                font-size: 1.25rem;
                color: #1f2937;
                font-weight: 700;
            }

            .product-price {
                font-weight: 800;
                color: #3b82f6;
                margin-bottom: 12px;
                font-size: 1.5rem;
            }

            .product-description {
                color: #6b7280;
                font-size: 1rem;
                line-height: 1.6;
                margin-bottom: 0;
            }

            /* Category Navigation */
            .category-nav {
                margin-bottom: 60px;
            }

            .category-nav h3 {
                color: #1f2937;
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 32px;
                text-align: center;
            }

            .category-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 20px;
                margin-bottom: 40px;
            }

            .category-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 16px;
                padding: 24px 16px;
                text-align: center;
                transition: all 0.3s ease;
                border: 1px solid #e2e8f0;
                cursor: pointer;
            }

            .category-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.1);
                border-color: #3b82f6;
            }

            .category-icon {
                font-size: 2.5rem;
                display: block;
                margin-bottom: 12px;
            }

            .category-card h4 {
                color: #1f2937;
                font-size: 1rem;
                font-weight: 600;
                margin: 0;
            }

            /* Sell Section */
            .sell-section {
                background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
                border-radius: 20px;
                padding: 40px;
                margin-bottom: 60px;
                border: 1px solid #bae6fd;
            }

            .sell-section h3 {
                color: #1f2937;
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 12px;
                text-align: center;
            }

            .sell-section > p {
                color: #6b7280;
                text-align: center;
                margin-bottom: 40px;
                font-size: 1.125rem;
            }

            /* Products Display */
            .products-display h3 {
                color: #1f2937;
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 32px;
                text-align: center;
            }
            
            /* Utility classes */
            .btn {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 12px 24px;
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                color: white;
                border: none;
                border-radius: 12px;
                cursor: pointer;
                text-decoration: none;
                font-weight: 600;
                font-size: 15px;
                transition: all 0.3s ease;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            }
            
            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
            }
            
            /* About section styles */
            .about {
                background: white;
                padding: 80px 60px;
                border-radius: 24px;
                margin: 80px auto;
                max-width: 1000px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.08);
                border: 1px solid #e5e7eb;
                position: relative;
                overflow: hidden;
            }

            .about::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6, #06b6d4);
            }

            .about h2 {
                color: #1f2937;
                font-size: 3rem;
                font-weight: 800;
                margin-bottom: 32px;
                text-align: center;
                letter-spacing: -0.02em;
            }

            .about p {
                font-size: 1.125rem;
                line-height: 1.8;
                margin-bottom: 24px;
                color: #4b5563;
            }

            .about p:last-child {
                font-weight: 700;
                font-size: 1.25rem;
                color: #3b82f6;
                text-align: center;
                margin-top: 40px;
                padding: 16px 32px;
                background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
                border-radius: 12px;
                border: 1px solid #bfdbfe;
            }

            .services {
                background: white;
                padding: 80px 50px;
                border-radius: 24px;
                margin: 80px 0;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.08);
                border: 1px solid #e5e7eb;
            }

            .services h2 {
                color: #1f2937;
                font-size: 3rem;
                font-weight: 800;
                margin-bottom: 16px;
                letter-spacing: -0.02em;
            }

            .services-intro {
                font-size: 1.125rem;
                color: #6b7280;
                max-width: 600px;
                margin: 0 auto 60px;
                line-height: 1.7;
            }
            
            .services-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 32px;
                margin-top: 60px;
            }
            
            .service-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 20px;
                padding: 40px 32px;
                transition: all 0.4s ease;
                border: 1px solid #e2e8f0;
                position: relative;
                overflow: hidden;
            }

            .service-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            }
            
            .service-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
                border-color: #cbd5e1;
            }

            .service-icon {
                font-size: 3rem;
                margin-bottom: 20px;
                display: block;
            }
            
            .service-card h3 {
                color: #1f2937;
                margin: 20px 0 16px;
                font-size: 1.5rem;
                font-weight: 700;
            }

            .service-card p {
                color: #6b7280;
                line-height: 1.7;
                font-size: 1rem;
            }

            /* Contact section styles */
            .contact {
                background: white;
                padding: 80px 50px;
                border-radius: 24px;
                margin: 80px 0;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.08);
                border: 1px solid #e5e7eb;
            }

            .contact h2 {
                margin-bottom: 16px;
                color: #1f2937;
                font-size: 3rem;
                font-weight: 800;
                letter-spacing: -0.02em;
            }

            .contact > p {
                font-size: 1.125rem;
                color: #6b7280;
                max-width: 600px;
                margin: 0 auto 60px;
                line-height: 1.7;
            }

            .contact-info {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 32px;
                margin: 60px 0;
            }

            .contact-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 20px;
                padding: 40px 32px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
                text-align: center;
                transition: all 0.4s ease;
                border: 1px solid #e2e8f0;
                position: relative;
                overflow: hidden;
            }

            .contact-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            }

            .contact-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
                border-color: #cbd5e1;
            }

            .contact-icon {
                font-size: 3rem;
                margin-bottom: 24px;
                display: block;
            }

            .contact-card h3 {
                color: #1f2937;
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 16px;
            }

            .contact-card p {
                color: #6b7280;
                font-size: 1rem;
                line-height: 1.6;
                margin: 0;
            }

            .contact-links {
                margin-top: 10px;
            }

            .contact-links a {
                color: #0066cc;
                text-decoration: none;
                transition: opacity 0.3s;
                display: inline-flex;
                align-items: center;
                gap: 5px;
            }

            .social-icon {
                width: 24px;
                height: 24px;
                object-fit: contain;
            }

            .contact-links a:hover {
                opacity: 0.8;
            }

            /* Products section styles */
            .products {
                background: white;
                padding: 80px 50px;
                border-radius: 24px;
                margin: 80px 0;
                box-shadow: 0 20px 40px rgba(0,0,0,0.08);
                border: 1px solid #e5e7eb;
            }

            .products h2 {
                color: #1f2937;
                font-size: 3rem;
                font-weight: 800;
                margin-bottom: 60px;
                text-align: center;
                letter-spacing: -0.02em;
            }

            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 32px;
                margin-top: 60px;
            }

            .product-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 10px 25px rgba(0,0,0,0.08);
                transition: all 0.4s ease;
                border: 1px solid #e2e8f0;
                position: relative;
            }

            .product-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            }

            .product-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px rgba(0,0,0,0.15);
                border-color: #cbd5e1;
            }

            .product-image {
                background: white;
                padding: 20px;
                text-align: center;
            }

            .product-image img {
                width: 100%;
                max-width: 250px;
                height: 200px;
                object-fit: cover;
                border-radius: 12px;
                display: block;
                margin: 0 auto;
            }

            .product-details {
                padding: 24px;
            }

            .product-title {
                margin: 0 0 12px;
                font-size: 1.25rem;
                color: #1f2937;
                font-weight: 700;
            }

            .product-price {
                font-weight: 800;
                color: #3b82f6;
                margin-bottom: 12px;
                font-size: 1.5rem;
            }

            .product-description {
                color: #6b7280;
                font-size: 1rem;
                line-height: 1.6;
                margin-bottom: 0;
            }

            /* Category Navigation */
            .category-nav {
                margin-bottom: 60px;
            }

            .category-nav h3 {
                color: #1f2937;
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 32px;
                text-align: center;
            }

            .category-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 20px;
                margin-bottom: 40px;
            }

            .category-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 16px;
                padding: 24px 16px;
                text-align: center;
                transition: all 0.3s ease;
                border: 1px solid #e2e8f0;
                cursor: pointer;
            }

            .category-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.1);
                border-color: #3b82f6;
            }

            .category-icon {
                font-size: 2.5rem;
                display: block;
                margin-bottom: 12px;
            }

            .category-card h4 {
                color: #1f2937;
                font-size: 1rem;
                font-weight: 600;
                margin: 0;
            }

            /* Sell Section */
            .sell-section {
                background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
                border-radius: 20px;
                padding: 40px;
                margin-bottom: 60px;
                border: 1px solid #bae6fd;
            }

            .sell-section h3 {
                color: #1f2937;
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 12px;
                text-align: center;
            }

            .sell-section > p {
                color: #6b7280;
                text-align: center;
                margin-bottom: 40px;
                font-size: 1.125rem;
            }

            /* Products Display */
            .products-display h3 {
                color: #1f2937;
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 32px;
                text-align: center;
            }

            .add-product-section {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 40px;
                border-radius: 16px;
                margin-bottom: 40px;
                color: white;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            }

            .section-header {
                text-align: center;
                margin-bottom: 30px;
            }

            .section-header h3 {
                font-size: 2rem;
                margin-bottom: 10px;
                color: white;
            }

            .section-header p {
                font-size: 1.1rem;
                opacity: 0.9;
            }

            .form-row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }

            .form-group {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .form-group label {
                font-weight: 600;
                color: white;
                font-size: 1rem;
            }

            .form-group input,
            .form-group textarea,
            .form-group select {
                padding: 12px 16px;
                border: 2px solid rgba(255,255,255,0.2);
                border-radius: 8px;
                font-size: 16px;
                background: rgba(255,255,255,0.1);
                color: white;
                transition: all 0.3s ease;
            }

            .form-group input::placeholder,
            .form-group textarea::placeholder {
                color: rgba(255,255,255,0.7);
            }

            .form-group input:focus,
            .form-group textarea:focus,
            .form-group select:focus {
                outline: none;
                border-color: rgba(255,255,255,0.8);
                background: rgba(255,255,255,0.15);
            }

            .form-group textarea {
                min-height: 120px;
                resize: vertical;
            }

            .file-upload-wrapper {
                position: relative;
                border: 2px dashed rgba(255,255,255,0.3);
                border-radius: 8px;
                padding: 20px;
                text-align: center;
                transition: all 0.3s ease;
            }

            .file-upload-wrapper:hover {
                border-color: rgba(255,255,255,0.6);
                background: rgba(255,255,255,0.05);
            }

            .file-upload-wrapper input[type="file"] {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
            }

            .file-upload-info {
                pointer-events: none;
            }

            .file-upload-info span {
                display: block;
                font-weight: 600;
                margin-bottom: 5px;
            }

            .file-upload-info small {
                opacity: 0.8;
            }

            .form-actions {
                display: flex;
                gap: 15px;
                justify-content: center;
                margin-top: 30px;
            }

            .btn-primary {
                background: linear-gradient(45deg, #ff6b6b, #ee5a24);
                border: none;
                padding: 15px 30px;
                font-size: 1.1rem;
                font-weight: 600;
            }

            .btn-secondary {
                background: rgba(255,255,255,0.2);
                border: 2px solid rgba(255,255,255,0.3);
                color: white;
            }

            .btn-secondary:hover {
                background: rgba(255,255,255,0.3);
            }

            .product-form {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .form-group {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .form-group label {
                font-weight: 500;
                color: #333;
            }

            .form-group input,
            .form-group textarea {
                padding: 10px;
                border: 1px solid #ddd;
                border-radius: 4px;
                font-size: 16px;
            }

            .form-group textarea {
                min-height: 100px;
                resize: vertical;
            }

            .products h2 {
                color: #0066cc;
                font-size: 2rem;
                margin-bottom: 30px;
                text-align: center;
            }

            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 30px;
            }

            .product-card {
                background: white;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                transition: transform 0.3s;
            }

            .product-card:hover {
                transform: translateY(-5px);
            }

            .product-image img {
                width: 100%;
                max-width: 300px;
                height: auto;
                display: block;
                margin: 0 auto;
            }

            .product-details {
                padding: 15px;
            }

            .product-title {
                margin: 0 0 10px;
                font-size: 1.1rem;
                color: #333;
            }

            .product-price {
                font-weight: bold;
                color: #0066cc;
                margin-bottom: 10px;
            }

            .product-description {
                color: #666;
                font-size: 0.9rem;
                margin-bottom: 0;
            }



            /* Modal styles */
            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                z-index: 2000;
                align-items: center;
                justify-content: center;
            }
            
            .modal-content {
                background: white;
                padding: 40px;
                border-radius: 16px;
                width: 90%;
                max-width: 500px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                position: relative;
                border: 1px solid #e5e7eb;
            }
            
            .close-btn {
                position: absolute;
                top: 15px;
                right: 20px;
                font-size: 28px;
                cursor: pointer;
                color: #6b7280;
                background: none;
                border: none;
                padding: 5px;
                border-radius: 50%;
                transition: all 0.3s ease;
            }
            
            .close-btn:hover {
                background: #f3f4f6;
                color: #374151;
            }
            
            .modal h2 {
                color: #1f2937;
                font-size: 1.875rem;
                font-weight: 700;
                margin-bottom: 24px;
                text-align: center;
            }
            
            .modal .form-group {
                margin-bottom: 20px;
            }
            
            .modal .form-group label {
                display: block;
                margin-bottom: 8px;
                font-weight: 600;
                color: #374151;
            }
            
            .modal .form-group input {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 16px;
                transition: border-color 0.3s ease;
            }
            
            .modal .form-group input:focus {
                outline: none;
                border-color: #3b82f6;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }
            
            .modal .btn {
                width: 100%;
                margin-top: 20px;
            }
            
            .modal p {
                text-align: center;
                margin-top: 20px;
                color: #6b7280;
            }
            
            .modal a {
                color: #3b82f6;
                text-decoration: none;
                font-weight: 600;
            }
            
            .modal a:hover {
                text-decoration: underline;
            }

            /* Hero section */
            .hero {
                background: url('https://i.imgur.com/wp0OwcT.jpeg') center/cover;
                text-align: center;
                padding: 120px 0;
                color: white;
                position: relative;
                margin-bottom: 80px;
            }
            
            .hero::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 100%);
            }
            
            .hero .container {
                position: relative;
                z-index: 2;
            }
            
            .hero h1 {
                font-size: 4rem;
                font-weight: 800;
                margin-bottom: 24px;
                text-shadow: 0 4px 8px rgba(0,0,0,0.3);
                letter-spacing: -0.02em;
            }
            
            .hero p {
                font-size: 1.25rem;
                margin-bottom: 40px;
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
                opacity: 0.95;
                max-width: 600px;
                margin-left: auto;
                margin-right: auto;
            }

            /* Responsive design */
            @media (max-width: 768px) {
                .container {
                    padding: 0 16px;
                }
                
                nav {
                    flex-direction: column;
                    gap: 20px;
                }
                
                .nav-links {
                    flex-direction: column;
                    gap: 15px;
                    align-items: center;
                }

                .search-container {
                    order: -1;
                    width: 100%;
                    max-width: 300px;
                }

                .search-input {
                    min-width: auto;
                    flex: 1;
                }

                .user-actions {
                    flex-direction: column;
                    gap: 8px;
                }

                .hero h1 {
                    font-size: 2.5rem;
                }

                .hero p {
                    font-size: 1.1rem;
                }

                .about, .services, .contact, .products {
                    padding: 40px 24px;
                    margin: 40px 0;
                }

                .about h2, .services h2, .contact h2, .products h2 {
                    font-size: 2rem;
                }

                .form-row {
                    grid-template-columns: 1fr;
                }

                .services-grid, .contact-info, .products-grid {
                    grid-template-columns: 1fr;
                    gap: 24px;
                }

                .footer-content {
                    grid-template-columns: 1fr;
                    gap: 30px;
                }
            }

            @media (max-width: 480px) {
                .hero h1 {
                    font-size: 2rem;
                }

                .about, .services, .contact, .products {
                    padding: 30px 16px;
                }

                .btn {
                    padding: 10px 20px;
                    font-size: 14px;
                }
            }

            /* Form Styles */
            .product-form {
                display: flex;
                flex-direction: column;
                gap: 24px;
            }

            .form-row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
            }

            .form-group {
                display: flex;
                flex-direction: column;
            }

            .form-group label {
                font-weight: 600;
                color: white;
                margin-bottom: 8px;
                font-size: 0.875rem;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 12px 16px;
                border: 2px solid rgba(255, 255, 255, 0.2);
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.1);
                color: white;
                font-size: 16px;
                transition: all 0.3s ease;
            }

            .form-group input::placeholder,
            .form-group textarea::placeholder {
                color: rgba(255, 255, 255, 0.7);
            }

            .form-group input:focus,
            .form-group select:focus,
            .form-group textarea:focus {
                outline: none;
                border-color: rgba(255, 255, 255, 0.5);
                background: rgba(255, 255, 255, 0.15);
            }

            .form-group select option {
                background: #667eea;
                color: white;
            }

            .file-upload-wrapper {
                position: relative;
                display: inline-block;
                cursor: pointer;
                width: 100%;
            }

            .file-upload-wrapper input[type=file] {
                position: absolute;
                opacity: 0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }

            .file-upload-label {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 16px;
                border: 2px dashed rgba(255, 255, 255, 0.3);
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.05);
                color: rgba(255, 255, 255, 0.8);
                font-size: 14px;
                transition: all 0.3s ease;
            }

            .file-upload-wrapper:hover .file-upload-label {
                border-color: rgba(255, 255, 255, 0.5);
                background: rgba(255, 255, 255, 0.1);
            }

            .form-actions {
                display: flex;
                gap: 16px;
                justify-content: flex-end;
                margin-top: 24px;
            }

            .btn-secondary {
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 2px solid rgba(255, 255, 255, 0.3);
            }

            .btn-secondary:hover {
                background: rgba(255, 255, 255, 0.3);
                border-color: rgba(255, 255, 255, 0.5);
            }

            .section-header {
                text-align: center;
                margin-bottom: 32px;
            }

            .section-header h3 {
                color: white;
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 8px;
            }

            .section-header p {
                color: rgba(255, 255, 255, 0.8);
                font-size: 1rem;
            }

            /* About, Services, Contact sections */
            .about, .services, .contact {
                background: white;
                padding: 80px 50px;
                border-radius: 24px;
                margin: 80px 0;
                box-shadow: 0 20px 40px rgba(0,0,0,0.08);
                border: 1px solid #e5e7eb;
            }

            .about h2, .services h2, .contact h2 {
                color: #1f2937;
                font-size: 3rem;
                font-weight: 800;
                margin-bottom: 60px;
                text-align: center;
                letter-spacing: -0.02em;
            }

            .about p, .services p, .contact p {
                color: #6b7280;
                font-size: 1.125rem;
                line-height: 1.7;
                margin-bottom: 40px;
                text-align: center;
                max-width: 800px;
                margin-left: auto;
                margin-right: auto;
            }

            .services-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 32px;
                margin-top: 60px;
            }

            .service-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 20px;
                padding: 40px 32px;
                text-align: center;
                box-shadow: 0 10px 25px rgba(0,0,0,0.08);
                transition: all 0.4s ease;
                border: 1px solid #e2e8f0;
                position: relative;
            }

            .service-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            }

            .service-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px rgba(0,0,0,0.15);
                border-color: #cbd5e1;
            }

            .service-icon {
                font-size: 3rem;
                margin-bottom: 24px;
                display: block;
            }

            .service-card h3 {
                color: #1f2937;
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 16px;
            }

            .service-card p {
                color: #6b7280;
                font-size: 1rem;
                line-height: 1.6;
                margin: 0;
            }

            .contact-info {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 32px;
                margin-top: 60px;
            }

            .contact-card {
                background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                border-radius: 20px;
                padding: 40px 32px;
                text-align: center;
                box-shadow: 0 10px 25px rgba(0,0,0,0.08);
                transition: all 0.4s ease;
                border: 1px solid #e2e8f0;
                position: relative;
            }

            .contact-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            }

            .contact-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px rgba(0,0,0,0.15);
                border-color: #cbd5e1;
            }

            .contact-icon {
                font-size: 3rem;
                margin-bottom: 24px;
                display: block;
            }

            .contact-card h3 {
                color: #1f2937;
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 16px;
            }

            .contact-card p {
                color: #6b7280;
                font-size: 1rem;
                line-height: 1.6;
                margin: 0;
            }

            /* Add Product Section */
            .add-product-section {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 40px;
                border-radius: 16px;
                margin-bottom: 40px;
                color: white;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            }
            #profile-modal .modal-content {
                padding-top: 24px;
            }
            #profile-avatar-wrapper:hover label {
                opacity: 1;
            }
            #profile-avatar-wrapper label {
                opacity: 0.85;
                transition: opacity 0.2s;
            }
            #profile-avatar-wrapper label:hover {
                opacity: 1;
            }
            #profile-avatar {
                border: 2px solid #3b82f6;
            }
            #edit-profile-section .form-group label {
                color: #374151;
                font-weight: 600;
            }
            #edit-profile-section .form-group input {
                background: #f3f4f6;
                color: #1a1a1a;
                border: 2px solid #e5e7eb;
            }
            #edit-profile-section .form-group input:focus {
                background: #fff;
                border-color: #3b82f6;
                color: #1a1a1a;
            }
            #edit-profile-section .btn-primary {
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                color: #fff;
            }
            #edit-profile-section .btn-primary:hover {
                background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            }
            #edit-profile-section .btn-secondary {
                background: #e5e7eb;
                color: #374151;
                border: 2px solid #cbd5e1;
            }
            #edit-profile-section .btn-secondary:hover {
                background: #cbd5e1;
            }
            .cart-icon-btn {
                background: none;
                border: none;
                position: relative;
                cursor: pointer;
                margin-right: 8px;
            }
            .cart-icon {
                font-size: 1.7rem;
                color: #3b82f6;
            }
            .cart-count {
                position: absolute;
                top: -6px;
                right: -6px;
                background: #ef4444;
                color: #fff;
                font-size: 0.8rem;
                border-radius: 50%;
                padding: 2px 6px;
                font-weight: bold;
            }
            #cart-modal .modal-content, #checkout-modal .modal-content {
                padding-top: 24px;
            }
            #cart-items-list .cart-item {
                display: flex;
                align-items: center;
                gap: 12px;
                background: #f3f4f6;
                padding: 8px 12px;
                border-radius: 8px;
                margin-bottom: 10px;
            }
            #cart-items-list .cart-item img {
                width: 48px;
                height: 48px;
                border-radius: 8px;
                object-fit: cover;
                border: 1px solid #e5e7eb;
            }
            #cart-items-list .cart-item .remove-cart-btn {
                background: #ef4444;
                color: #fff;
                border: none;
                border-radius: 6px;
                padding: 4px 10px;
                margin-left: auto;
                cursor: pointer;
                font-size: 0.9rem;
            }
            #cart-items-list .cart-item .remove-cart-btn:hover {
                background: #dc2626;
            }
            #cart-items-list .cart-item .cart-qty {
                width: 36px;
                text-align: center;
                border: 1px solid #e5e7eb;
                border-radius: 4px;
                margin: 0 6px;
            }
            #product-details-modal .modal-content {
                padding-top: 24px;
            }
            #product-details-content img {
                width: 100%;
                max-width: 320px;
                height: auto;
                display: block;
                margin: 0 auto 16px auto;
                border-radius: 12px;
            }
            #product-details-content .product-title {
                font-size: 1.3rem;
                font-weight: 700;
                color: #1f2937;
                margin-bottom: 8px;
                text-align: center;
            }
            #product-details-content .product-price {
                color: #3b82f6;
                font-size: 1.1rem;
                font-weight: 700;
                margin-bottom: 8px;
                text-align: center;
            }
            #product-details-content .product-description {
                color: #4b5563;
                font-size: 1rem;
                margin-bottom: 12px;
                text-align: center;
            }
            #product-details-content .product-seller {
                color: #6b7280;
                font-size: 0.95rem;
                margin-bottom: 16px;
                text-align: center;
            }
            #product-details-content .btn-row {
                display: flex;
                gap: 12px;
                justify-content: center;
                margin-top: 18px;
            }
        </style>
    </head>
    <!-- body tag already opened at the top -->
        <header>
            <div class="container">
                <nav>
                    <a href="#top" class="logo">
                        <img src="https://i.imgur.com/sLpob3a.png" alt="JUSTBUY Logo" width="90" style="vertical-align: middle; display: inline-block;">
                    </a>
                    <div class="search-container">
                        <input type="text" id="search-input" placeholder="Search products..." class="search-input">
                        <button class="search-btn">🔍</button>
                    </div>
                    <ul class="nav-links">
                        <li><a href="#top">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#products">Marketplace</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                    <div class="user-actions" id="user-actions">
                        <a href="login.html" class="btn btn-outline">Login</a>
                        <a href="signup.html" class="btn">Sign Up</a>
                    </div></nav>
                </nav>
            </div>
        </header>
        
        <main>
            <div class="hero">
                <div class="container">
                    <h1>Welcome to JUSTBUY</h1>
                    <p>Your trusted marketplace for buying and selling quality products</p>
                    <a href="#products" class="btn">Browse Marketplace</a>
                </div>
            </div>
            <div class="container">
        <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <script>
    const firebaseConfig = {
        apiKey: "AIzaSyCONPao46hKk3HxwAHJmx0OWrg-jJaxqrc",
        authDomain: "justbuystore-e7543.firebaseapp.com",
        projectId: "justbuystore-e7543",
        storageBucket: "justbuystore-e7543.appspot.com",
        messagingSenderId: "6718042368",
        appId: "1:6718042368:web:11d484b0d484e3ab1e83e5",
        measurementId: "G-F4CYKFEST4"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // --- Firebase App Check (reCAPTCHA v3) ---
    // For production, do NOT use debug token. Use your reCAPTCHA v3 site key from Firebase Console
    var script = document.createElement('script');
    script.src = "https://www.gstatic.com/firebasejs/9.23.0/firebase-app-check-compat.js";
    script.onload = function() {
        firebase.appCheck().activate('6LdngZMrAAAAABDLcf5DbC9pO5lo4lJWB6y-RGrG');
    };
    document.head.appendChild(script);
    </script>



    <div class="container">
    <section id="products" class="products">
        <h2>Browse & Sell</h2>

        <!-- Category Navigation -->
        <div class="category-nav">
        <h3>Browse by Category</h3>
        <div class="category-grid">
            <div class="category-card" data-category="all">
            🌐<br>All
            </div>
            <div class="category-card" data-category="electronics">
            📱<br>Electronics
            </div>
            <div class="category-card" data-category="fashion">
            👕<br>Fashion
            </div>
            <div class="category-card" data-category="home">
            🏠<br>Home & Garden
            </div>
            <div class="category-card" data-category="sports">
            ⚽<br>Sports
            </div>
            <div class="category-card" data-category="books">
            📚<br>Books
            </div>
            <div class="category-card" data-category="toys">
            🎮<br>Toys & Games
            </div>
        </div>
        </div>

        <!-- Products Display -->
        <div class="products-display">
        <h3>Latest Products</h3>
        <div class="products-grid">
            <!-- Sample product cards -->
            <div class="product-card" data-category="electronics"></div>
            <div class="product-card" data-category="fashion"></div>
            <div class="product-card" data-category="home"></div>
            <div class="product-card" data-category="books"></div>
            <div class="product-card" data-category="toys"></div>
            <div class="product-card" data-category="sports"></div>
        </div>
        </div>
    </section>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const categoryCards = document.querySelectorAll(".category-card");
        const productCards = document.querySelectorAll(".product-card");

        categoryCards.forEach(card => {
        card.addEventListener("click", () => {
            const selectedCategory = card.getAttribute("data-category");

            productCards.forEach(product => {
            const productCategory = product.getAttribute("data-category");

            if (selectedCategory === "all" || productCategory === selectedCategory) {
                product.style.display = "block";
            } else {
                product.style.display = "none";
            }
            });
        });
        });
    });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        const userActions = document.getElementById('user-actions');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
        if (currentUser) {
            userActions.innerHTML = `
            <span style="color: #3b82f6; font-weight: 600;">Hi, ${currentUser.email.split('@')[0]}</span>
            <button class="btn btn-outline" onclick="logout()">Logout</button>
            `;
        } else {
            if (loginBtn) loginBtn.onclick = () => window.location.href = 'login.html';
            if (signupBtn) signupBtn.onclick = () => window.location.href = 'signup.html';
        }
        });
    
        function logout() {
        sessionStorage.removeItem('currentUser');
        firebase.auth().signOut().then(() => {
            window.location.href = "login.html";
        });
        }
    </script>
    




    <section id="about" class="about" style="max-width: 800px; margin: 0 auto; text-align: center; padding: 20px;">
        <h2>About JUSTBUY</h2>
        <p>Welcome to JUSTBUY – your one-stop online marketplace where anyone can shop and anyone can sell.</p>
        <p>We believe shopping should be simple, fun, and open to everyone. At JUSTBUY, you'll find a wide variety of products – from fashion, gadgets, and home essentials to rare finds and unique items. Whether you're a buyer looking for great deals or a seller wanting to showcase your products, JUSTBUY is built for you.</p>
        <p>With easy-to-use features, secure transactions, and a growing community of buyers and sellers, JUSTBUY empowers people to turn their passion into profit – or just find that perfect item they've been looking for.</p>
        <p>Just Click. Just Shop. JustBuy.</p>
    </section>


                
                </section>

                <section id="services" class="services">
                    <h2>Our Services</h2>
                    <p class="services-intro">At JUSTBUY, we provide everything you need to buy smart and sell easy. Whether you're a shopper or a seller, we've got the tools to make your experience smooth and rewarding.</p>
                    
                    <div class="services-grid">
                        <div class="service-card">
                            <div class="service-icon">🛒</div>
                            <h3>Buy Products</h3>
                            <p>Discover a wide variety of items across multiple categories – from fashion and gadgets to home essentials and collectibles.</p>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon">🧑‍💻</div>
                            <h3>Create a Seller Account</h3>
                            <p>Start your own shop in minutes. List your products, set your prices, and reach potential customers directly.</p>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon">💎</div>
                            <h3>Featured Listings</h3>
                            <p>Get premium visibility by upgrading to a Featured Listing for more exposure and faster sales.</p>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon">📣</div>
                            <h3>Product Promotion</h3>
                            <p>Highlight items, offer discounts, or join seasonal sales events with our promotional tools.</p>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon">🔐</div>
                            <h3>Secure Transactions</h3>
                            <p>Our platform ensures safe payment processing to protect both buyers and sellers.</p>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon">📦</div>
                            <h3>Order Tracking</h3>
                            <p>Track every order from confirmation to delivery with real-time updates.</p>
                        </div>
                    </div>
                </section>

                <section id="contact" class="contact">
                    <h2>Contact Us</h2>
                    <p>Have questions, feedback, or need help? We're here for you!</p>
                    <p>Whether you're a buyer or a seller, the JUSTBUY Support Team is ready to assist you with anything from account setup to product concerns.</p>
                    
                    <div class="contact-info">
                        <div class="contact-card">
                            <div class="contact-icon">📧</div>
                            <h3>Email Support</h3>
                            <p>Got an issue or inquiry? Send us a message anytime.</p>
                            <div class="contact-links">
                                <a href="mailto:support@justbuy.com">support@justbuy.com</a>
                            </div>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">💬</div>
                            <h3>Live Chat</h3>
                            <p>Chat with our team directly on the website.</p>
                            <div class="contact-links">
                                Available Mon-Sat<br>9:00 AM – 6:00 PM (PHT)
                            </div>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">📱</div>
                            <h3>Social Media</h3>
                            <p>Stay updated and reach out to us:</p>
                            <div class="contact-links">
                                <a href="https://facebook.com/justbuy">
                                    <img src="https://cdn-icons-png.flaticon.com/512/124/124010.png" alt="Facebook" class="social-icon">
                                    Facebook
                                </a><br>
                                <a href="https://instagram.com/justbuy_official">
                                    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram" class="social-icon">
                                    Instagram
                                </a><br>
                                <a href="https://tiktok.com/@justbuyph">
                                    <img src="https://cdn-icons-png.flaticon.com/512/3046/3046121.png" alt="TikTok" class="social-icon">
                                    TikTok
                                </a>
                            </div>
                        </div>
                    </div>
                    <p>We'd love to hear from you! Your feedback helps us improve and build a better marketplace for everyone.</p>
                </section>
            </div>
        </main>

    <!-- Account Profile Modal -->
    <div id="profile-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close-btn">&times;</span>
            <h2>Account Profile</h2>
            <div id="profile-section">
                <div style="display: flex; flex-direction: column; align-items: center; gap: 16px; margin-bottom: 24px;">
                    <div id="profile-avatar-wrapper" style="position: relative;">
                        <img id="profile-avatar" src="https://ui-avatars.com/api/?name=User&background=3b82f6&color=fff&size=96" alt="Profile Picture" style="width: 96px; height: 96px; border-radius: 50%; object-fit: cover; border: 2px solid #3b82f6;">
                        <label for="profile-image-upload" style="position: absolute; bottom: 0; right: 0; background: #3b82f6; color: #fff; border-radius: 50%; padding: 4px 6px; cursor: pointer; font-size: 18px; border: 2px solid #fff;">
                            <input type="file" id="profile-image-upload" accept="image/*" style="display: none;">
                            <span title="Change profile picture">&#9998;</span>
                        </label>
                    </div>
                    <button id="edit-profile-btn" class="btn btn-outline" style="font-size: 14px; padding: 6px 16px;">Edit Profile</button>
                </div>
                <div id="profile-info" style="margin-bottom: 24px;">
                    <!-- User info will be injected here -->
                </div>
                <div id="edit-profile-section" style="display: none; margin-bottom: 24px;">
                    <form id="edit-profile-form">
                        <div class="form-group">
                            <label for="edit-username">Username</label>
                            <input type="text" id="edit-username" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-email">Email</label>
                            <input type="email" id="edit-email" required>
                        </div>
                        <div class="form-actions" style="margin-top: 12px;">
                            <button type="submit" class="btn btn-primary">Save</button>
                            <button type="button" class="btn btn-secondary" id="cancel-edit-profile">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="my-products-section">
                    <h3 style="font-size: 1.1rem; color: #3b82f6; margin-bottom: 10px;">My Products</h3>
                    <div id="my-products-list" style="display: flex; flex-direction: column; gap: 12px;"></div>
                </div>
            </div>
        </div>
    </div>


        <!-- Cart Modal -->
        <div id="cart-modal" class="modal">
            <div class="modal-content" style="max-width: 500px;">
                <span class="close-btn">&times;</span>
                <h2>Your Cart</h2>
                <div id="cart-items-list" style="margin-bottom: 24px;"></div>
                <div id="cart-total" style="font-weight: bold; margin-bottom: 16px;"></div>
                <div style="text-align: right;">
                    <button id="checkout-btn" class="btn btn-primary">Checkout</button>
                </div>
            </div>
        </div>
        <!-- Checkout Modal -->
        <div id="checkout-modal" class="modal">
            <div class="modal-content" style="max-width: 400px;">
                <span class="close-btn">&times;</span>
                <h2>Checkout</h2>
                <div id="checkout-summary" style="margin-bottom: 24px;"></div>
                <form id="checkout-form">
                    <div class="form-group">
                        <label for="checkout-address">Shipping Address</label>
                        <input type="text" id="checkout-address" required placeholder="Enter your address">
                    </div>
                    <div class="form-actions" style="margin-top: 12px;">
                        <button type="submit" class="btn btn-primary">Place Order</button>
                    </div>
                </form>
            </div>
        </div>

        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>JUSTBUY</h3>
                        <p>Your trusted marketplace for buying and selling quality products. Connect with our community and discover amazing deals.</p>
                    </div>
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="#top">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#services">Services</a></li>
                            <li><a href="#products">Marketplace</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>Contact</h4>
                        <p>📧 support@justbuy.com</p>
                        <p>💬 Live Chat Available</p>
                        <p>📱 Follow us on social media</p>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2024 JUSTBUY. All rights reserved. | Made with ❤️ for our community</p>
                </div>
            </div>
        </footer>
        
        <!-- Product Details Modal -->
        <div id="product-details-modal" class="modal">
            <div class="modal-content" style="max-width: 500px;">
                <span class="close-btn">&times;</span>
                <div id="product-details-content">
                    <!-- Product details will be injected here -->
                </div>
            </div>
        </div>
        
        <script>
            // Basic JavaScript for interactive elements
            document.addEventListener('DOMContentLoaded', function() {
                // Add your JavaScript here
                
                // Smooth scrolling for anchor links
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        
                        const targetId = this.getAttribute('href');
                        if(targetId === '#') return;
                        
                        const targetElement = document.querySelector(targetId);
                        if(targetElement) {
                            const headerHeight = document.querySelector('header').offsetHeight;
                            const targetPosition = targetElement.offsetTop - headerHeight;
                            
                            window.scrollTo({
                                top: targetPosition,
                                behavior: 'smooth'
                            });
                        }
                    });
                });

                // Search functionality
                const searchInput = document.getElementById('search-input');
                const searchBtn = document.querySelector('.search-btn');
                const mainContent = document.querySelector('main .container');
                const productsSection = document.getElementById('products');
                let searchMode = false;

                function showSearchView() {
                    // Hide all sections except products display
                    document.querySelectorAll('main .container > section').forEach(sec => {
                        if (sec !== productsSection) sec.style.display = 'none';
                    });
                    // Hide category nav and sell section inside products
                    const catNav = productsSection.querySelector('.category-nav');
                    const sellSection = productsSection.querySelector('.sell-section');
                    if (catNav) catNav.style.display = 'none';
                    if (sellSection) sellSection.style.display = 'none';
                    // Only show products display
                    const productsDisplay = productsSection.querySelector('.products-display');
                    if (productsDisplay) productsDisplay.style.display = '';
                    // Hide any back button if present
                    const backBtn = productsSection.querySelector('.btn.btn-outline');
                    if (backBtn && backBtn.textContent.includes('Back')) backBtn.style.display = 'none';
                    searchMode = true;
                }
                function exitSearchView() {
                    // Show all sections
                    document.querySelectorAll('main .container > section').forEach(sec => {
                        sec.style.display = '';
                    });
                    // Restore category nav and sell section
                    const catNav = productsSection.querySelector('.category-nav');
                    const sellSection = productsSection.querySelector('.sell-section');
                    if (catNav) catNav.style.display = '';
                    if (sellSection) sellSection.style.display = '';
                    searchMode = false;
                }
                function filterProducts(searchTerm) {
                    const cards = document.querySelectorAll('.products-grid .product-card');
                    const term = searchTerm.trim().toLowerCase();
                    let anyVisible = false;
                    cards.forEach(card => {
                        const title = card.querySelector('.product-title')?.textContent.toLowerCase() || '';
                        const desc = card.querySelector('.product-description')?.textContent.toLowerCase() || '';
                        if (!term || title.includes(term) || desc.includes(term)) {
                            card.style.display = '';
                            anyVisible = true;
                        } else {
                            card.style.display = 'none';
                        }
                    });
                    if (term) {
                        showSearchView();
                    } else if (searchMode) {
                        exitSearchView();
                    }
                }
                if (searchInput && searchBtn) {
                    searchBtn.addEventListener('click', function() {
                        filterProducts(searchInput.value);
                    });
                    searchInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            filterProducts(searchInput.value);
                        }
                    });
                    searchInput.addEventListener('input', function() {
                        if (!searchInput.value.trim()) {
                            filterProducts('');
                        }
                    });
                }
                
                // Product submission handler
                const productForm = document.getElementById('product-form');
                const productsGrid = document.querySelector('.products-grid');
                
                if (productForm) {
                    productForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        // Restrict to logged-in users
                        const currentUser = sessionStorage.getItem('currentUser');
                        if (!currentUser) {
                            alert('You must be signed in to post a product.');
                            openModal('account-modal', 'login');
                            return;
                        }
                        const fileInput = document.getElementById('product-image');
                        const file = fileInput.files[0];
                        if (!file) {
                            alert('Please select an image');
                            return;
                        }
                        const reader = new FileReader();
                        reader.onload = function(ev) {
                            const product = {
                                name: document.getElementById('product-name').value,
                                price: document.getElementById('product-price').value,
                                description: document.getElementById('product-description').value,
                                image: ev.target.result,
                                username: JSON.parse(sessionStorage.getItem('currentUser'))?.username || 'Guest'
                            };
                            // Save to localStorage
                            let products = [];
                            try {
                                products = JSON.parse(sessionStorage.getItem('products')) || [];
                            } catch (e) {}
                            products.push(product);
                            sessionStorage.setItem('products', JSON.stringify(products));
                            // Add to UI immediately
                            if (productsGrid) {
                                const productCard = document.createElement('div');
                                productCard.className = 'product-card';
                                productCard.innerHTML = `
                                    <div class="product-image">
                                        <img src="${product.image}" alt="${product.name}">
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title">${product.name}</h3>
                                        <p class="product-price">$${parseFloat(product.price).toFixed(2)}</p>
                                        <p class="product-description">${product.description}</p>
                                    </div>
                                `;
                                productsGrid.appendChild(productCard);
                            }
                            productForm.reset();
                            addCartButtonsToProducts(); // Ensure new product gets cart/buy buttons
                        };
                        reader.readAsDataURL(file);
                    });
                }

                // Modal functionality
                window.openModal = function(modalId, formType) {
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.style.display = 'flex';
                        if (modalId === 'profile-modal') {
                            // Show user info
                            const profileInfo = document.getElementById('profile-info');
                            const currentUser = sessionStorage.getItem('currentUser');
                            const avatarImg = document.getElementById('profile-avatar');
                            const joinDateKey = 'userJoinDate';
                            let joinDate = sessionStorage.getItem(joinDateKey);
                            if (!joinDate && currentUser) {
                                joinDate = new Date().toLocaleDateString();
                                sessionStorage.setItem(joinDateKey, joinDate);
                            }
                            if (profileInfo && currentUser) {
                                const user = JSON.parse(currentUser);
                                profileInfo.innerHTML = `
                                    <p><strong>Username:</strong> ${user.username}</p>
                                    <p><strong>Email:</strong> ${user.email}</p>
                                    <p><strong>Join Date:</strong> ${joinDate || ''}</p>
                                `;
                                // Set avatar
                                const storedAvatar = sessionStorage.getItem('profileAvatar');
                                if (storedAvatar) {
                                    avatarImg.src = storedAvatar;
                                } else {
                                    avatarImg.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.username)}&background=3b82f6&color=fff&size=96`;
                                }
                            }
                            
                    }
                }

                // Close modal when clicking outside or on close button
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', function(e) {
                        if (e.target === modal) {
                            modal.style.display = 'none';
                        }
                    });
                });

                document.querySelectorAll('.close-btn').forEach(closeBtn => {
                    closeBtn.addEventListener('click', function() {
                        this.closest('.modal').style.display = 'none';
                    });
                });

                
                
                // Initialize UI on page load
                updateUserInterface();

                // Show user info in profile modal
                const profileModal = document.getElementById('profile-modal');
                if (profileModal) {
                    profileModal.addEventListener('click', function(e) {
                        if (e.target === profileModal) {
                            profileModal.style.display = 'none';
                        }
                    });
                    profileModal.querySelector('.close-btn').addEventListener('click', function() {
                        profileModal.style.display = 'none';
                    });
                }

                // Profile picture upload
                const profileImageUpload = document.getElementById('profile-image-upload');
                if (profileImageUpload) {
                    profileImageUpload.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(ev) {
                                sessionStorage.setItem('profileAvatar', ev.target.result);
                                document.getElementById('profile-avatar').src = ev.target.result;
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                }
                // Edit profile
                const editProfileBtn = document.getElementById('edit-profile-btn');
                const editProfileSection = document.getElementById('edit-profile-section');
                const profileInfoDiv = document.getElementById('profile-info');
                if (editProfileBtn && editProfileSection && profileInfoDiv) {
                    editProfileBtn.addEventListener('click', function() {
                        const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                        document.getElementById('edit-username').value = currentUser.username;
                        document.getElementById('edit-email').value = currentUser.email;
                        editProfileSection.style.display = 'block';
                        profileInfoDiv.style.display = 'none';
                    });
                    document.getElementById('cancel-edit-profile').addEventListener('click', function() {
                        editProfileSection.style.display = 'none';
                        profileInfoDiv.style.display = 'block';
                    });
                    document.getElementById('edit-profile-form').addEventListener('submit', function(e) {
                        e.preventDefault();
                        const newUsername = document.getElementById('edit-username').value;
                        const newEmail = document.getElementById('edit-email').value;
                        const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                        currentUser.username = newUsername;
                        currentUser.email = newEmail;
                        sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                        editProfileSection.style.display = 'none';
                        profileInfoDiv.style.display = 'block';
                        updateUserInterface();
                        // Refresh profile info
                        window.openModal('profile-modal');
                    });
                }
                // My Products section
                function renderMyProducts() {
                    const myProductsList = document.getElementById('my-products-list');
                    myProductsList.innerHTML = '';
                    const currentUser = sessionStorage.getItem('currentUser');
                    if (!currentUser) return;
                    const user = JSON.parse(currentUser);
                    // We'll store products in localStorage as 'products', an array of objects
                    let products = [];
                    try {
                        products = JSON.parse(sessionStorage.getItem('products')) || [];
                    } catch (e) {}
                    // Filter products by user (by username)
                    const userProducts = products.filter(p => p.username === user.username);
                    if (userProducts.length === 0) {
                        myProductsList.innerHTML = '<p style="color: #6b7280;">No products posted yet.</p>';
                    } else {
                        userProducts.forEach(product => {
                            const div = document.createElement('div');
                            div.style.display = 'flex';
                            div.style.alignItems = 'center';
                            div.style.gap = '12px';
                            div.style.background = '#f3f4f6';
                            div.style.padding = '8px 12px';
                            div.style.borderRadius = '8px';
                            div.innerHTML = `
                                <img src="${product.image}" alt="${product.name}" style="width: 48px; height: 48px; border-radius: 8px; object-fit: cover; border: 1px solid #e5e7eb;">
                                <div>
                                    <div style="font-weight: 600; color: #1f2937;">${product.name}</div>
                                    <div style="color: #3b82f6; font-weight: 500;">$${parseFloat(product.price).toFixed(2)}</div>
                                </div>
                            `;
                            myProductsList.appendChild(div);
                        });
                    }
                }
                // Add to Cart and Buy Now buttons for each product card (existing and new)
                function addCartButtonsToProducts() {
                    document.querySelectorAll('.products-grid .product-card').forEach(card => {
                        if (!card.querySelector('.add-cart-btn')) {
                            const details = card.querySelector('.product-details');
                            if (details) {
                                const name = details.querySelector('.product-title')?.textContent;
                                const price = details.querySelector('.product-price')?.textContent.replace('$','');
                                const image = card.querySelector('img')?.src;
                                const addCartBtn = document.createElement('button');
                                addCartBtn.className = 'btn btn-outline add-cart-btn';
                                addCartBtn.textContent = 'Add to Cart';
                                addCartBtn.style.marginRight = '8px';
                                addCartBtn.onclick = function() {
                                    // Restrict to logged-in users
                                    const currentUser = sessionStorage.getItem('currentUser');
                                    if (!currentUser) {
                                        alert('You must be signed in to add to cart.');
                                        openModal('account-modal', 'login');
                                        return;
                                    }
                                    addToCart({ name, price, image });
                                };
                                const buyNowBtn = document.createElement('button');
                                buyNowBtn.className = 'btn btn-primary buy-now-btn';
                                buyNowBtn.textContent = 'Buy Now';
                                buyNowBtn.onclick = function() {
                                    // Restrict to logged-in users
                                    const currentUser = sessionStorage.getItem('currentUser');
                                    if (!currentUser) {
                                        alert('You must be signed in to buy a product.');
                                        openModal('account-modal', 'login');
                                        return;
                                    }
                                    addToCart({ name, price, image }, true);
                                };
                                const btnRow = document.createElement('div');
                                btnRow.style.marginTop = '10px';
                                btnRow.appendChild(addCartBtn);
                                btnRow.appendChild(buyNowBtn);
                                details.appendChild(btnRow);
                            }
                        }
                    });
                }
                addCartButtonsToProducts();
                // Also call after adding new products
                if (productsGrid) {
                    const observer = new MutationObserver(addCartButtonsToProducts);
                    observer.observe(productsGrid, { childList: true });
                }
                // Cart logic
                function getCart() {
                    try {
                        return JSON.parse(sessionStorage.getItem('cart')) || [];
                    } catch (e) { return []; }
                }
                function setCart(cart) {
                    sessionStorage.setItem('cart', JSON.stringify(cart));
                    updateCartCount();
                }
                function addToCart(product, buyNow = false) {
                    let cart = getCart();
                    // If already in cart, increase qty
                    const idx = cart.findIndex(p => p.name === product.name && p.price === product.price && p.image === product.image);
                    if (idx > -1) {
                        cart[idx].qty = (cart[idx].qty || 1) + 1;
                    } else {
                        cart.push({ ...product, qty: 1 });
                    }
                    setCart(cart);
                    if (buyNow) {
                        openModal('cart-modal');
                        setTimeout(() => {
                            openModal('checkout-modal');
                        }, 300);
                    }
                }
                function updateCartCount() {
                    const cart = getCart();
                    const count = cart.reduce((sum, p) => sum + (p.qty || 1), 0);
                    const cartCount = document.getElementById('cart-count');
                    if (cartCount) cartCount.textContent = count;
                }
                // Cart modal logic
                const cartModal = document.getElementById('cart-modal');
                if (cartModal) {
                    cartModal.addEventListener('click', function(e) {
                        if (e.target === cartModal) cartModal.style.display = 'none';
                    });
                    cartModal.querySelector('.close-btn').addEventListener('click', function() {
                        cartModal.style.display = 'none';
                    });
                }
                function renderCart() {
                    const cart = getCart();
                    const cartItemsList = document.getElementById('cart-items-list');
                    const cartTotal = document.getElementById('cart-total');
                    cartItemsList.innerHTML = '';
                    let total = 0;
                    if (cart.length === 0) {
                        cartItemsList.innerHTML = '<p style="color: #6b7280;">Your cart is empty.</p>';
                        cartTotal.textContent = '';
                    } else {
                        cart.forEach((item, idx) => {
                            total += parseFloat(item.price) * (item.qty || 1);
                            const div = document.createElement('div');
                            div.className = 'cart-item';
                            div.innerHTML = `
                                <img src="${item.image}" alt="${item.name}">
                                <div style="flex:1;">
                                    <div style="font-weight: 600; color: #1f2937;">${item.name}</div>
                                    <div style="color: #3b82f6; font-weight: 500;">$${parseFloat(item.price).toFixed(2)}</div>
                                </div>
                                <input type="number" min="1" value="${item.qty || 1}" class="cart-qty" data-idx="${idx}">
                                <button class="remove-cart-btn" data-idx="${idx}">Remove</button>
                            `;
                            cartItemsList.appendChild(div);
                        });
                        cartTotal.textContent = 'Total: $' + total.toFixed(2);
                    }
                }
                // Open cart modal and render
                window.openModal = (function(origOpenModal) {
                    return function(modalId, formType) {
                        origOpenModal.call(this, modalId, formType);
                        if (modalId === 'cart-modal') {
                            renderCart();
                        }
                        if (modalId === 'checkout-modal') {
                            renderCheckoutSummary();
                        }
                    };
                })(window.openModal);
                // Cart item events
                document.addEventListener('input', function(e) {
                    if (e.target.classList.contains('cart-qty')) {
                        const idx = e.target.getAttribute('data-idx');
                        let cart = getCart();
                        let val = parseInt(e.target.value);
                        if (isNaN(val) || val < 1) val = 1;
                        cart[idx].qty = val;
                        setCart(cart);
                        renderCart();
                    }
                });
                document.addEventListener('click', function(e) {
                    if (e.target.classList.contains('remove-cart-btn')) {
                        const idx = e.target.getAttribute('data-idx');
                        let cart = getCart();
                        cart.splice(idx, 1);
                        setCart(cart);
                        renderCart();
                    }
                });
                // Checkout logic
                const checkoutBtn = document.getElementById('checkout-btn');
                if (checkoutBtn) {
                    checkoutBtn.addEventListener('click', function() {
                        openModal('checkout-modal');
                    });
                }
                const checkoutModal = document.getElementById('checkout-modal');
                if (checkoutModal) {
                    checkoutModal.addEventListener('click', function(e) {
                        if (e.target === checkoutModal) checkoutModal.style.display = 'none';
                    });
                    checkoutModal.querySelector('.close-btn').addEventListener('click', function() {
                        checkoutModal.style.display = 'none';
                    });
                }
                function renderCheckoutSummary() {
                    const cart = getCart();
                    const summary = document.getElementById('checkout-summary');
                    let total = 0;
                    if (cart.length === 0) {
                        summary.innerHTML = '<p>Your cart is empty.</p>';
                    } else {
                        summary.innerHTML = cart.map(item => {
                            total += parseFloat(item.price) * (item.qty || 1);
                            return `<div style="margin-bottom: 6px;">${item.name} x ${item.qty || 1} - $${(parseFloat(item.price) * (item.qty || 1)).toFixed(2)}</div>`;
                        }).join('') + `<div style="font-weight:bold; margin-top:10px;">Total: $${total.toFixed(2)}</div>`;
                    }
                }
                const checkoutForm = document.getElementById('checkout-form');
                if (checkoutForm) {
                    checkoutForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        const address = document.getElementById('checkout-address').value;
                        const cart = getCart();
                        if (cart.length === 0) {
                            alert('Your cart is empty.');
                            return;
                        }
                        // Save order to order history
                        let orders = [];
                        try {
                            orders = JSON.parse(sessionStorage.getItem('orders')) || [];
                        } catch (e) {}
                        const order = {
                            items: cart,
                            address,
                            date: new Date().toLocaleString()
                        };
                        orders.push(order);
                        sessionStorage.setItem('orders', JSON.stringify(orders));
                        // Clear cart
                        setCart([]);
                        checkoutModal.style.display = 'none';
                        cartModal.style.display = 'none';
                        alert('Order placed successfully!');
                        // Update order history in profile
                        renderOrderHistory();
                    });
                }
                // Order history in profile
                function renderOrderHistory() {
                    let orders = [];
                    try {
                        orders = JSON.parse(sessionStorage.getItem('orders')) || [];
                    } catch (e) {}
                    const orderSection = document.getElementById('order-history-section');
                    if (!orderSection) return;
                    orderSection.innerHTML = '';
                    if (orders.length === 0) {
                        orderSection.innerHTML = '<p style="color: #6b7280;">No orders yet.</p>';
                    } else {
                        orders.slice().reverse().forEach(order => {
                            const div = document.createElement('div');
                            div.style.background = '#f3f4f6';
                            div.style.padding = '10px 14px';
                            div.style.borderRadius = '8px';
                            div.style.marginBottom = '10px';
                            div.innerHTML = `<div style="font-weight:600; color:#1f2937; margin-bottom:4px;">Order on ${order.date}</div>` +
                                order.items.map(item => `<div style="font-size:0.97rem; margin-bottom:2px;">${item.name} x ${item.qty || 1} - $${(parseFloat(item.price) * (item.qty || 1)).toFixed(2)}</div>`).join('') +
                                `<div style="font-size:0.95rem; color:#6b7280; margin-top:4px;">Ship to: ${order.address}</div>`;
                            orderSection.appendChild(div);
                        });
                    }
                }
                // Add order history section to profile modal
                const profileSection = document.getElementById('profile-section');
                if (profileSection && !document.getElementById('order-history-section')) {
                    const orderDiv = document.createElement('div');
                    orderDiv.id = 'order-history-section';
                    orderDiv.style.marginTop = '32px';
                    orderDiv.innerHTML = '<h3 style="font-size: 1.1rem; color: #3b82f6; margin-bottom: 10px;">Order History</h3>';
                    profileSection.appendChild(orderDiv);
                }
                renderOrderHistory();

                // Timed auto-logout after 30 minutes of inactivity
                let logoutTimer;
                function resetLogoutTimer() {
                    if (logoutTimer) clearTimeout(logoutTimer);
                    logoutTimer = setTimeout(function() {
                        sessionStorage.removeItem('currentUser');
                        updateUserInterface();
                        alert('You have been logged out due to inactivity.');
                    }, 30 * 60 * 1000); // 30 minutes
                }
                // Reset timer on any user activity
                ['click', 'mousemove', 'keydown', 'scroll'].forEach(evt => {
                    document.addEventListener(evt, resetLogoutTimer, true);
                });
                // Start timer on page load if logged in
                if (sessionStorage.getItem('currentUser')) {
                    resetLogoutTimer();
                }
                // Also reset timer on login
                const origUpdateUserInterface = updateUserInterface;
                updateUserInterface = function() {
                    origUpdateUserInterface();
                    if (sessionStorage.getItem('currentUser')) {
                        resetLogoutTimer();
                    } else if (logoutTimer) {
                        clearTimeout(logoutTimer);
                    }
                }

                // Product Details Modal logic
                const productDetailsModal = document.getElementById('product-details-modal');
                const productDetailsContent = document.getElementById('product-details-content');
                if (productDetailsModal) {
                    productDetailsModal.addEventListener('click', function(e) {
                        if (e.target === productDetailsModal) productDetailsModal.style.display = 'none';
                    });
                    productDetailsModal.querySelector('.close-btn').addEventListener('click', function() {
                        productDetailsModal.style.display = 'none';
                    });
                }
                function openProductDetailsModal(product) {
                    if (!productDetailsModal || !productDetailsContent) return;
                    productDetailsContent.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <div class="product-title">${product.name}</div>
                        <div class="product-price">$${parseFloat(product.price).toFixed(2)}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-seller">Seller: ${product.username || 'Unknown'}</div>
                        <div class="btn-row">
                            <button class="btn btn-outline add-cart-btn">Add to Cart</button>
                            <button class="btn btn-primary buy-now-btn">Buy Now</button>
                        </div>
                    `;
                    // Add event listeners for buttons
                    const addCartBtn = productDetailsContent.querySelector('.add-cart-btn');
                    const buyNowBtn = productDetailsContent.querySelector('.buy-now-btn');
                    addCartBtn.onclick = function() {
                        const currentUser = sessionStorage.getItem('currentUser');
                        if (!currentUser) {
                            alert('You must be signed in to add to cart.');
                            openModal('account-modal', 'login');
                            return;
                        }
                        addToCart(product);
                    };
                    buyNowBtn.onclick = function() {
                        const currentUser = sessionStorage.getItem('currentUser');
                        if (!currentUser) {
                            alert('You must be signed in to buy a product.');
                            openModal('account-modal', 'login');
                            return;
                        }
                        addToCart(product, true);
                    };
                    productDetailsModal.style.display = 'flex';
                }
                // Attach click event to product cards
                function attachProductCardClicks() {
                    document.querySelectorAll('.products-grid .product-card').forEach(card => {
                        if (!card.classList.contains('details-attached')) {
                            card.classList.add('details-attached');
                            card.addEventListener('click', function(e) {
                                // Prevent click if clicking a button inside the card
                                if (e.target.closest('button')) return;
                                // Get product info from card
                                const img = card.querySelector('img')?.src;
                                const name = card.querySelector('.product-title')?.textContent;
                                const price = card.querySelector('.product-price')?.textContent.replace('$','');
                                const description = card.querySelector('.product-description')?.textContent;
                                // Try to get seller from local/session storage
                                let username = 'Unknown';
                                // Try to find in products list
                                let products = [];
                                try {
                                    products = JSON.parse(sessionStorage.getItem('products')) || [];
                                } catch (e) {}
                                const found = products.find(p => p.name === name && p.price === price && p.image === img);
                                if (found && found.username) username = found.username;
                                openProductDetailsModal({ name, price, image: img, description, username });
                            });
                        }
                    });
                }
                attachProductCardClicks();
                // Also call after adding new products
                if (productsGrid) {
                    const observer = new MutationObserver(() => {
                        addCartButtonsToProducts();
                        attachProductCardClicks();
                    });
                    observer.observe(productsGrid, { childList: true });
                }
            };
        });
        </script>
